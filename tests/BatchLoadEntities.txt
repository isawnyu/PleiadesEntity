Batch Loading of Entities
=========================

Setup
-----

    >>> lpf = self.portal.portal_types['Large Plone Folder']
    >>> lpf_allow = lpf.global_allow
    >>> lpf.global_allow = True

    >>> n = self.portal.portal_types['GeographicName']
    >>> n_allow = n.global_allow
    >>> n.global_allow = True

    >>> folder = self.folder

    Containers

    >>> _ = folder.invokeFactory('Large Plone Folder', id='names')
    >>> _ = folder.invokeFactory('LocationContainer', id='locations')
    >>> _ = folder.invokeFactory('PlaceContainer', id='places')

Utility tests
-------------

    >>> format_listofstrings([])
    u''
    >>> format_listofstrings(['x'])
    u'x'
    >>> format_listofstrings(['x', 'y'])
    u'x and y'
    >>> format_listofstrings(['x', 'y', 'z'])
    u'x, y and z'
    
    >>> purifyText(u'aaa') == u'aaa'
    True
    >>> purifyText(u'abab') == u'abab'
    True
    >>> purifyText(u'Magie\U000000A01950,\U000000A0989') == u'Magie 1950, 989'
    True
   
Load one entity
---------------

    >>> r = load_place(folder, "%s/batlas-65-2-12.xml" % TEST_DATA)
    >>> r['place_id']
    '0'
    >>> r['name_id']
    'amblada'

    Test place

    >>> p = getattr(folder.places, '0')
    >>> p.modernLocation
    u'Hisartepe, near K\u0131z\u0131lca'
    >>> p.placeType
    u'settlement'

    Test name

    >>> n = getattr(folder.names, r['name_id'])
    >>> n.title
    u'Amblada'
    >>> n.nameAttested
    u'Amblada'

